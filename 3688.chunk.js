"use strict";(self.webpackChunkreact_esri_template=self.webpackChunkreact_esri_template||[]).push([[3688],{87040:(t,e,n)=>{n.d(e,{q:()=>a});var r,o,i={exports:{}};r=i,void 0!==(o=function(){function t(n,r,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,l=r-o+1,c=Math.log(s),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(s-h)/s)*(l-s/2<0?-1:1);t(n,r,Math.max(o,Math.floor(r-l*h/s+f)),Math.min(i,Math.floor(r+(s-l)*h/s+f)),a)}var u=n[r],p=o,m=i;for(e(n,o,r),a(n[i],u)>0&&e(n,o,i);p<m;){for(e(n,p,m),p++,m--;a(n[p],u)<0;)p++;for(;a(n[m],u)>0;)m--}0===a(n[o],u)?e(n,o,m):e(n,++m,i),m<=r&&(o=m+1),r<=m&&(i=m-1)}}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}return function(e,r,o,i,a){t(e,r,o||0,i||e.length-1,a||n)}}())&&(r.exports=o);var a=i.exports},47442:(t,e,n)=>{n.d(e,{a:()=>i,b:()=>l,n:()=>s,s:()=>a,t:()=>o});var r=n(76927);function o(t,e,n){if(t.count!==e.count)return void r.k.error("source and destination buffers need to have the same number of elements");const o=t.count,i=n[0],a=n[1],s=n[2],l=n[4],c=n[5],h=n[6],f=n[8],u=n[9],p=n[10],m=n[12],d=n[13],y=n[14],g=t.typedBuffer,x=t.typedBufferStride,M=e.typedBuffer,B=e.typedBufferStride;for(let t=0;t<o;t++){const e=t*x,n=t*B,r=M[n],o=M[n+1],_=M[n+2];g[e]=i*r+l*o+f*_+m,g[e+1]=a*r+c*o+u*_+d,g[e+2]=s*r+h*o+p*_+y}}function i(t,e,n){if(t.count!==e.count)return void r.k.error("source and destination buffers need to have the same number of elements");const o=t.count,i=n[0],a=n[1],s=n[2],l=n[3],c=n[4],h=n[5],f=n[6],u=n[7],p=n[8],m=t.typedBuffer,d=t.typedBufferStride,y=e.typedBuffer,g=e.typedBufferStride;for(let t=0;t<o;t++){const e=t*d,n=t*g,r=y[n],o=y[n+1],x=y[n+2];m[e]=i*r+l*o+f*x,m[e+1]=a*r+c*o+u*x,m[e+2]=s*r+h*o+p*x}}function a(t,e,n){const r=Math.min(t.count,e.count),o=t.typedBuffer,i=t.typedBufferStride,a=e.typedBuffer,s=e.typedBufferStride;for(let t=0;t<r;t++){const e=t*i,r=t*s;o[e]=n*a[r],o[e+1]=n*a[r+1],o[e+2]=n*a[r+2]}}function s(t,e){const n=Math.min(t.count,e.count),r=t.typedBuffer,o=t.typedBufferStride,i=e.typedBuffer,a=e.typedBufferStride;for(let t=0;t<n;t++){const e=t*o,n=t*a,s=i[n],l=i[n+1],c=i[n+2],h=Math.sqrt(s*s+l*l+c*c);if(h>0){const t=1/h;r[e]=t*s,r[e+1]=t*l,r[e+2]=t*c}}}function l(t,e,n){const r=Math.min(t.count,e.count),o=t.typedBuffer,i=t.typedBufferStride,a=e.typedBuffer,s=e.typedBufferStride;for(let t=0;t<r;t++){const e=t*i,r=t*s;o[e]=a[r]>>n,o[e+1]=a[r+1]>>n,o[e+2]=a[r+2]>>n}}Object.freeze({__proto__:null,transformMat4:o,transformMat3:i,scale:a,normalize:s,shiftRight:l})},10406:(t,e,n)=>{function r(t,e,n){const r=t.typedBuffer,o=t.typedBufferStride,i=e.typedBuffer,a=e.typedBufferStride,s=n?n.count:e.count;let l=(n&&n.dstIndex?n.dstIndex:0)*o,c=(n&&n.srcIndex?n.srcIndex:0)*a;for(let t=0;t<s;++t)r[l]=i[c],r[l+1]=i[c+1],r[l+2]=i[c+2],l+=o,c+=a}function o(t,e,n,r,o){var i,a;const s=t.typedBuffer,l=t.typedBufferStride,c=null!=(i=null==o?void 0:o.count)?i:t.count;let h=(null!=(a=null==o?void 0:o.dstIndex)?a:0)*l;for(let t=0;t<c;++t)s[h]=e,s[h+1]=n,s[h+2]=r,h+=l}n.d(e,{c:()=>r,f:()=>o}),Object.freeze({__proto__:null,copy:r,fill:o})},35548:(t,e,n)=>{n.d(e,{QB:()=>s});var r=n(19677),o=n(59472),i=n(62698),a=n(87040);class s{constructor(t=9,e){this.compareMinX=f,this.compareMinY=u,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&("function"==typeof e?this.toBBox=e:this._initFormat(e)),this.clear()}destroy(){this.clear(),B.prune(),_.prune(),A.prune(),T.prune()}all(t){this._all(this.data,t)}search(t,e){let n=this.data;const r=this.toBBox;if(x(t,n))for(B.clear();n;){for(let o=0,i=n.children.length;o<i;o++){const i=n.children[o],a=n.leaf?r(i):i;x(t,a)&&(n.leaf?e(i):g(t,a)?this._all(i,e):B.push(i))}n=B.pop()}}collides(t){let e=this.data;const n=this.toBBox;if(!x(t,e))return!1;for(B.clear();e;){for(let r=0,o=e.children.length;r<o;r++){const o=e.children[r],i=e.leaf?n(o):o;if(x(t,i)){if(e.leaf||g(t,i))return!0;B.push(o)}}e=B.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}let e=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new w([]),this}remove(t){if(!t)return this;let e,n=this.data,i=null,a=0,s=!1;const l=this.toBBox(t);for(A.clear(),T.clear();n||A.length>0;){var c;if(n||(n=(0,o.j0)(A.pop()),i=A.data[A.length-1],a=null!=(c=T.pop())?c:0,s=!0),n.leaf&&(e=(0,r.cq)(n.children,t,n.children.length,n.indexHint),-1!==e))return n.children.splice(e,1),A.push(n),this._condense(A),this;s||n.leaf||!g(n,l)?i?(a++,n=i.children[a],s=!1):n=null:(A.push(n),T.push(a),a=0,i=n,n=n.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){let n=t;for(_.clear();n;){var r;if(!0===n.leaf)for(const t of n.children)e(t);else _.pushArray(n.children);n=null!=(r=_.pop())?r:null}}_build(t,e,n,r){const o=n-e+1;let i=this._maxEntries;if(o<=i){const r=new w(t.slice(e,n+1));return l(r,this.toBBox),r}r||(r=Math.ceil(Math.log(o)/Math.log(i)),i=Math.ceil(o/i**(r-1)));const a=new Y([]);a.height=r;const s=Math.ceil(o/i),c=s*Math.ceil(Math.sqrt(i));M(t,e,n,c,this.compareMinX);for(let o=e;o<=n;o+=c){const e=Math.min(o+c-1,n);M(t,o,e,s,this.compareMinY);for(let n=o;n<=e;n+=s){const o=Math.min(n+s-1,e);a.children.push(this._build(t,n,o,r-1))}}return l(a,this.toBBox),a}_chooseSubtree(t,e,n,r){for(;r.push(e),!0!==e.leaf&&r.length-1!==n;){let n,r=1/0,o=1/0;for(let i=0,a=e.children.length;i<a;i++){const a=e.children[i],s=p(a),l=d(t,a)-s;l<o?(o=l,r=s<r?s:r,n=a):l===o&&s<r&&(r=s,n=a)}e=n||e.children[0]}return e}_insert(t,e,n){const r=this.toBBox,o=n?t:r(t);A.clear();const i=this._chooseSubtree(o,this.data,e,A);for(i.children.push(t),h(i,o);e>=0&&A.data[e].children.length>this._maxEntries;)this._split(A,e),e--;this._adjustParentBBoxes(o,A,e)}_split(t,e){const n=t.data[e],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);const i=this._chooseSplitIndex(n,o,r);if(!i)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const a=n.children.splice(i,n.children.length-i),s=n.leaf?new w(a):new Y(a);s.height=n.height,l(n,this.toBBox),l(s,this.toBBox),e?t.data[e-1].children.push(s):this._splitRoot(n,s)}_splitRoot(t,e){this.data=new Y([t,e]),this.data.height=t.height+1,l(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let r,o,i;r=o=1/0;for(let a=e;a<=n-e;a++){const e=c(t,0,a,this.toBBox),s=c(t,a,n,this.toBBox),l=y(e,s),h=p(e)+p(s);l<r?(r=l,i=a,o=h<o?h:o):l===r&&h<o&&(o=h,i=a)}return i}_chooseSplitAxis(t,e,n){const r=t.leaf?this.compareMinX:f,o=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,o)&&t.children.sort(r)}_allDistMargin(t,e,n,r){t.children.sort(r);const o=this.toBBox,i=c(t,0,e,o),a=c(t,n-e,n,o);let s=m(i)+m(a);for(let r=e;r<n-e;r++){const e=t.children[r];h(i,t.leaf?o(e):e),s+=m(i)}for(let r=n-e-1;r>=e;r--){const e=t.children[r];h(a,t.leaf?o(e):e),s+=m(a)}return s}_adjustParentBBoxes(t,e,n){for(let r=n;r>=0;r--)h(e.data[r],t)}_condense(t){for(let e=t.length-1;e>=0;e--){const n=t.data[e];if(0===n.children.length)if(e>0){const o=t.data[e-1],i=o.children;i.splice((0,r.cq)(i,n,i.length,o.indexHint),1)}else this.clear();else l(n,this.toBBox)}}_initFormat(t){const e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function l(t,e){c(t,0,t.children.length,e,t)}function c(t,e,n,r,o){o||(o=new w([])),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let i,a=e;a<n;a++)i=t.children[a],h(o,t.leaf?r(i):i);return o}function h(t,e){t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY)}function f(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function p(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function m(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function y(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),o=Math.min(t.maxX,e.maxX),i=Math.min(t.maxY,e.maxY);return Math.max(0,o-n)*Math.max(0,i-r)}function g(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function x(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function M(t,e,n,r,i){const s=[e,n];for(;s.length;){const e=(0,o.j0)(s.pop()),n=(0,o.j0)(s.pop());if(e-n<=r)continue;const l=n+Math.ceil((e-n)/r/2)*r;(0,a.q)(t,l,n,e,i),s.push(n,l,l,e)}}const B=new i.Z,_=new i.Z,A=new i.Z,T=new i.Z({deallocator:void 0});class v extends class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}{constructor(){super(...arguments),this.height=1,this.indexHint=new r.SO}}class w extends v{constructor(t){super(),this.children=t,this.leaf=!0}}class Y extends v{constructor(t){super(),this.children=t,this.leaf=!1}}},20783:(t,e,n)=>{n.d(e,{Z:()=>_});var r,o=n(56140),i=n(58385),a=n(59472),s=n(79881),l=(n(95830),n(68055),n(36544),n(87566)),c=n(67128),h=n(12811),f=n(17387),u=n(77625),p=n(61106),m=n(28449),d=n(89333),y=n(27393),g=n(57805),x=n(47442),M=n(10406);let B=r=class extends i.wq{constructor(t){super(t),this.origin=(0,u.c)(),this.translation=(0,u.c)(),this.rotation=(0,y.Ue)(),this.scale=(0,u.f)(1,1,1),this.geographic=!0}get localMatrix(){const t=(0,h.c)();return(0,c.s)(t,t,this.scale),(0,c.c)(t,t,(0,y.WH)(this.rotation),(0,y.ZZ)(this.rotation)),(0,c.t)(t,t,this.translation),t}get localMatrixInverse(){return(0,c.a)((0,h.c)(),this.localMatrix)}applyLocal(t,e){return(0,f.m)(e,t,this.localMatrix)}applyLocalInverse(t,e){return(0,f.m)(e,t,this.localMatrixInverse)}project(t,e){const n=new Float64Array(t.length),r=g.fP.fromTypedArray(n),o=g.fP.fromTypedArray(t);if(this.geographic){const t=(0,d.N_)((0,d.Iu)(e)),i=(0,h.c)();return(0,m.P_)(e,this.origin,i,t),(0,c.m)(i,i,this.localMatrix),(0,x.t)(r,o,i),(0,m.CM)(n,t,0,n,e,0,n.length/3),n}const{localMatrix:i,origin:a}=this;(0,c.f)(i,h.I)?(0,M.c)(r,o):(0,x.t)(r,o,i);for(let t=0;t<n.length;t+=3)n[t+0]+=a[0],n[t+1]+=a[1],n[t+2]+=a[2];return n}getOriginPoint(t){const[e,n,r]=this.origin;return new p.Z({x:e,y:n,z:r,spatialReference:t})}equals(t){return(0,a.pC)(t)&&this.geographic===t.geographic&&(0,f.k)(this.origin,t.origin)&&(0,c.g)(this.localMatrix,t.localMatrix)}clone(){const t={origin:(0,u.a)(this.origin),translation:(0,u.a)(this.translation),rotation:(0,y.Ue)(this.rotation),scale:(0,u.a)(this.scale),geographic:this.geographic};return new r(t)}};(0,o._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],B.prototype,"origin",void 0),(0,o._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],B.prototype,"translation",void 0),(0,o._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],B.prototype,"rotation",void 0),(0,o._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],B.prototype,"scale",void 0),(0,o._)([(0,s.Cb)({type:Boolean,nonNullable:!0,json:{write:!0}})],B.prototype,"geographic",void 0),(0,o._)([(0,s.Cb)()],B.prototype,"localMatrix",null),(0,o._)([(0,s.Cb)()],B.prototype,"localMatrixInverse",null),B=r=(0,o._)([(0,l.j)("esri.geometry.support.MeshTransform")],B);const _=B},27393:(t,e,n)=>{n.d(e,{EU:()=>f,WH:()=>u,ZZ:()=>h,qC:()=>c,Ue:()=>s,uT:()=>l});var r=n(33655),o=n(2847),i=n(32232),a=n(17387);function s(t=p){return[t[0],t[1],t[2],t[3]]}function l(t,e,n=s()){return(0,a.g)(n,t),n[3]=e,n}function c(t,e,n=s()){return(0,o.s)(m,t,u(t)),(0,o.s)(d,e,u(e)),(0,o.m)(m,d,m),function(t,e){return t[3]=e,t}(n,(0,r.BV)((0,o.g)(n,m)))}function h(t){return t}function f(t){return t[3]}function u(t){return(0,r.Vl)(t[3])}const p=[0,0,1,0],m=(0,i.a)(),d=(0,i.a)();s()},76927:(t,e,n)=>{n.d(e,{k:()=>r});const r=n(36544).Z.getLogger("esri.views.3d.support.buffer.math")},73688:(t,e,n)=>{n.r(e),n.d(e,{default:()=>c,ElevationSamplerWorker:()=>s});var r=n(95830),o=n(59472),i=n(35548),a=n(47188);class s{async createIndex(t,e){const n=new Array;if(!t.vertexAttributes||!t.vertexAttributes.position)return new i.QB;const r=this.createMeshData(t),a=(0,o.pC)(e)?await e.invoke("createIndexThread",r,{transferList:n}):this.createIndexThread(r).result;return this.createPooledRBush().fromJSON(a)}createIndexThread(t){const e=new Float64Array(t.position),n=this.createPooledRBush();return t.components?this.createIndexComponentsThread(n,e,t.components.map((t=>new Uint32Array(t)))):this.createIndexAllThread(n,e)}createIndexAllThread(t,e){const n=new Array(e.length/9);let r=0;for(let t=0;t<e.length;t+=9)n[r++]=l(e,t+0,t+3,t+6);return t.load(n),{result:t.toJSON()}}createIndexComponentsThread(t,e,n){let r=0;for(const t of n)r+=t.length/3;const o=new Array(r);let i=0;for(const t of n)for(let n=0;n<t.length;n+=3)o[i++]=l(e,3*t[n+0],3*t[n+1],3*t[n+2]);return t.load(o),{result:t.toJSON()}}createMeshData(t){const e=(t.transform?(0,a.I5)({position:t.vertexAttributes.position,normal:null,tangent:null},t.transform,t.spatialReference).position:t.vertexAttributes.position).buffer;return!t.components||t.components.some((t=>!t.faces))?{position:e}:{position:e,components:t.components.map((t=>t.faces))}}createPooledRBush(){return new i.QB(9,(0,r.Z)("csp-restrictions")?t=>t:[".minX",".minY",".maxX",".maxY"])}}function l(t,e,n,r){return{minX:Math.min(t[e+0],t[n+0],t[r+0]),maxX:Math.max(t[e+0],t[n+0],t[r+0]),minY:Math.min(t[e+1],t[n+1],t[r+1]),maxY:Math.max(t[e+1],t[n+1],t[r+1]),p0:[t[e+0],t[e+1],t[e+2]],p1:[t[n+0],t[n+1],t[n+2]],p2:[t[r+0],t[r+1],t[r+2]]}}const c=s},74933:(t,e,n)=>{function r(t,e){var n;return t.isGeographic||t.isWebMercator&&(null==(n=null==e?void 0:e.geographic)||n)}n.d(e,{h:()=>r})},47188:(t,e,n)=>{n.d(e,{iv:()=>y,I5:()=>g,w1:()=>x,FF:()=>M,Yq:()=>B});var r=n(59472),o=n(93533),i=n(30663),a=n(67128),s=n(12811),l=n(98501),c=n(28449),h=n(89333),f=n(20783),u=n(57805),p=n(47442),m=n(74933),d=n(88733);function y(t,e,n){return(0,m.h)(e.spatialReference,n)?function(t,e,n){const r=e.spatialReference,o=w(e,n,X),i=new Float64Array(t.position.length),a=function(t,e,n,r){(0,p.t)(u.fP.fromTypedArray(r),u.fP.fromTypedArray(t),e);const o=new Float64Array(t.length);return(0,d.To)(r,o,n)}(t.position,o,r,i),s=(0,l.a)(S,o);return{position:a,normal:_(a,i,t.normal,s,r),tangent:A(a,i,t.tangent,s,r)}}(t,e,n):function(t,e,n){const r=new Float64Array(t.position.length),o=t.position,i=e.x,a=e.y,s=e.z||0,{horizontal:l,vertical:c}=P(n?n.unit:null,e.spatialReference);for(let t=0;t<o.length;t+=3)r[t+0]=o[t+0]*l+i,r[t+1]=o[t+1]*l+a,r[t+2]=o[t+2]*c+s;return{position:r,normal:t.normal,tangent:t.tangent}}(t,e,n)}function g(t,e,n){const{position:o,normal:i,tangent:a}=t;if((0,r.Wi)(e))return{position:o,normal:i,tangent:a};const s=e.localMatrix;return y({position:(0,d.zZ)(o,new Float64Array(o.length),s),normal:(0,r.pC)(i)?(0,d.w9)(i,new Float32Array(i.length),s):null,tangent:(0,r.pC)(a)?(0,d.VS)(a,new Float32Array(a.length),s):null},e.getOriginPoint(n),{geographic:e.geographic})}function x(t,e,n){if(null!=n&&n.useTransform){var r;const{position:o,normal:i,tangent:a}=t;return{vertexAttributes:{position:o,normal:i,tangent:a},transform:new f.Z({origin:[e.x,e.y,null!=(r=e.z)?r:0],geographic:(0,m.h)(e.spatialReference,n)})}}return{vertexAttributes:y(t,e,n),transform:null}}function M(t,e,n){return(0,m.h)(e.spatialReference,n)?v(t,e,n):T(t,e,n)}function B(t,e,n,o){if((0,r.Wi)(e))return M(t,n,o);const i=g(t,e,n.spatialReference);return n.equals(e.getOriginPoint(n.spatialReference))?T(i,n,o):(0,m.h)(n.spatialReference,o)?v(i,n,o):T(i,n,o)}function _(t,e,n,o,i){if((0,r.Wi)(n))return null;const a=new Float32Array(n.length);return(0,p.a)(u.ct.fromTypedArray(a),u.ct.fromTypedArray(n),o),(0,d.Yk)(a,t,e,i,a),a}function A(t,e,n,o,i){if((0,r.Wi)(n))return null;const a=new Float32Array(n.length);(0,p.a)(u.ct.fromTypedArray(a,4*Float32Array.BYTES_PER_ELEMENT),u.ct.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT),o);for(let t=3;t<a.length;t+=4)a[t]=n[t];return(0,d.M2)(a,t,e,i,a),a}function T(t,e,n){const r=new Float64Array(t.position.length),o=t.position,i=e.x,a=e.y,s=e.z||0,{horizontal:l,vertical:c}=P(n?n.unit:null,e.spatialReference);for(let t=0;t<o.length;t+=3)r[t+0]=(o[t+0]-i)/l,r[t+1]=(o[t+1]-a)/l,r[t+2]=(o[t+2]-s)/c;return{position:r,normal:t.normal,tangent:t.tangent}}function v(t,e,n){const r=e.spatialReference;w(e,n,X);const o=(0,a.a)(b,X),i=new Float64Array(t.position.length),s=function(t,e,n,r){const o=(0,d.XO)(t,e,r),i=u.fP.fromTypedArray(o),a=new Float64Array(o.length),s=u.fP.fromTypedArray(a);return(0,p.t)(s,i,n),a}(t.position,r,o,i),c=(0,l.a)(S,o);return{position:s,normal:Y(t.normal,t.position,i,r,c),tangent:E(t.tangent,t.position,i,r,c)}}function w(t,e,n){(0,c.P_)(t.spatialReference,[t.x,t.y,t.z||0],n,(0,h.rS)(t.spatialReference));const{horizontal:r,vertical:o}=P(e?e.unit:null,t.spatialReference);return(0,a.s)(n,n,[r,r,o]),n}function Y(t,e,n,o,i){if((0,r.Wi)(t))return null;const a=(0,d.Iz)(t,e,n,o,new Float32Array(t.length)),s=u.ct.fromTypedArray(a);return(0,p.a)(s,s,i),a}function E(t,e,n,o,i){if((0,r.Wi)(t))return null;const a=(0,d.wi)(t,e,n,o,new Float32Array(t.length)),s=u.ct.fromTypedArray(a,4*Float32Array.BYTES_PER_ELEMENT);return(0,p.a)(s,s,i),a}function P(t,e){if((0,r.Wi)(t))return F;const n=e.isGeographic?1:(0,o.Z7)(e),i=e.isGeographic?1:(0,o._R)(e),a=(0,o.En)(1,t,"meters");return{horizontal:a*n,vertical:a*i}}const X=(0,s.c)(),b=(0,s.c)(),S=(0,i.c)(),F={horizontal:1,vertical:1}},88733:(t,e,n)=>{n.d(e,{To:()=>B,Yk:()=>x,Iz:()=>g,M2:()=>w,wi:()=>v,XO:()=>M,w9:()=>A,zZ:()=>_,VS:()=>T});var r=n(36544),o=n(59472),i=n(98501),a=n(30663),s=n(12811),l=n(17387),c=n(77625),h=n(28449),f=n(89333),u=n(27780),p=n(41241),m=n(57805),d=n(47442);const y=r.Z.getLogger("esri.geometry.support.meshUtils.normalProjection");function g(t,e,n,r,o){return E(r)?(Y(0,m.ct.fromTypedArray(t),m.fP.fromTypedArray(e),m.fP.fromTypedArray(n),r,m.ct.fromTypedArray(o)),o):(y.error("Cannot convert spatial reference to PCPF"),o)}function x(t,e,n,r,o){return E(r)?(Y(1,m.ct.fromTypedArray(t),m.fP.fromTypedArray(e),m.fP.fromTypedArray(n),r,m.ct.fromTypedArray(o)),o):(y.error("Cannot convert to spatial reference from PCPF"),o)}function M(t,e,n){return(0,h.CM)(t,e,0,n,(0,f.rS)(e),0,t.length/3),n}function B(t,e,n){return(0,h.CM)(t,(0,f.rS)(n),0,e,n,0,t.length/3),e}function _(t,e,n){if((0,o.Wi)(t))return e;const r=m.fP.fromTypedArray(t),i=m.fP.fromTypedArray(e);return(0,d.t)(i,r,n),e}function A(t,e,n){if((0,o.Wi)(t))return e;(0,i.a)(F,n);const r=m.ct.fromTypedArray(t),a=m.ct.fromTypedArray(e);return(0,d.a)(a,r,F),(0,i.i)(F)||(0,d.n)(a,a),e}function T(t,e,n){if((0,o.Wi)(t))return e;(0,i.a)(F,n);const r=m.ct.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),a=m.ct.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT);if((0,d.a)(a,r,F),(0,i.i)(F)||(0,d.n)(a,a),t!==e)for(let n=3;n<t.length;n+=4)e[n]=t[n];return e}function v(t,e,n,r,o){if(!E(r))return y.error("Cannot convert spatial reference to PCPF"),o;Y(0,m.ct.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),m.fP.fromTypedArray(e),m.fP.fromTypedArray(n),r,m.ct.fromTypedArray(o,4*Float32Array.BYTES_PER_ELEMENT));for(let e=3;e<t.length;e+=4)o[e]=t[e];return o}function w(t,e,n,r,o){if(!E(r))return y.error("Cannot convert to spatial reference from PCPF"),o;Y(1,m.ct.fromTypedArray(t,16),m.fP.fromTypedArray(e),m.fP.fromTypedArray(n),r,m.ct.fromTypedArray(o,16));for(let e=3;e<t.length;e+=4)o[e]=t[e];return o}function Y(t,e,n,r,o,a){if(!e)return;const s=n.count,c=(0,f.rS)(o);if(P(o))for(let n=0;n<s;n++)r.getVec(n,X),e.getVec(n,b),(0,h.P_)(c,X,S,c),(0,i.f)(F,S),1===t&&(0,i.t)(F,F),(0,l.t)(b,b,F),a.setVec(n,b);else for(let o=0;o<s;o++){r.getVec(o,X),e.getVec(o,b),(0,h.P_)(c,X,S,c),(0,i.f)(F,S);const s=(0,p.mZ)(n.get(o,1));let f=Math.cos(s);0===t&&(f=1/f),F[0]*=f,F[1]*=f,F[2]*=f,F[3]*=f,F[4]*=f,F[5]*=f,1===t&&(0,i.t)(F,F),(0,l.t)(b,b,F),(0,l.n)(b,b),a.setVec(o,b)}return a}function E(t){return P(t)||function(t){return t.isWebMercator}(t)}function P(t){return t.isWGS84||(0,u.yW)(t)||(0,u.BZ)(t)||(0,u.V2)(t)}const X=(0,c.c)(),b=(0,c.c)(),S=(0,s.c)(),F=(0,a.c)()}}]);